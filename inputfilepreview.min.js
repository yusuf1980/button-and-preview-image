/*! Input File Button & Preview 2022-08-10
* https://github.com/yusuf1980/inputfilepreview.js
* version: 1.0
*/ let InputFilePreview=function(){"use strict";function b(a,b){if(b instanceof Object&&a instanceof Object){if(b instanceof Array&&a instanceof Array)return(b=[]).concat(a);if("function"!=typeof b||"function"!=typeof a)return c(a,b)}return a}function c(c,b){if(c instanceof Object&&b instanceof Object){var d={};for(var a in b)b.hasOwnProperty(a)&&(void 0!==c[a]?d[a]=c[a]:d[a]=b[a])}return d}function d(c,a){for(var b in a)c.style[b]=a[b]}function a(c,d){var a;if(c.jquery&&(c=c[0]),a=c,"object"==typeof HTMLElement?!(a instanceof HTMLElement):!a||"object"!=typeof a||null===a||1!==a.nodeType||"string"!=typeof a.nodeName){alert("use right element");return}if(this.elid=c,this._options={buttonText:"Choose Image",name:"filename",showInfo:!0,showPreview:!0,previewStyles:{"max-width":"200px","max-height":"200px","border-radius":"10px",border:"3px solid #ccc","margin-bottom":0},acceptType:["image/jpg","image/jpeg","image/png","image/gif"],onChange:function(a,b){}},this._options=function(d,c){if(!(f=d)||"object"!=typeof f||f.constructor!==Object)return c;var f,e={};for(var a in c)c.hasOwnProperty(a)&&(void 0!==d[a]?e[a]=b(d[a],c[a]):e[a]=c[a]);return e}(d,this._options),this.elid.getElementsByTagName("input")[0]&&(this.elinput=this.elid.getElementsByTagName("input")[0]),this._createElements(),this.elStatus=this.elinput.parentElement.querySelector(".inbfilename"),"INPUT"!==this.elinput.tagName){this.elStatus.textContent='Something wrong, use "<input />" Tag Name!';return}if("file"!==this.elinput.type){this.elStatus.textContent='Something wrong, use type "file" for this input!';return}this.elinput.addEventListener("change",a=>{var[b]=a.target.files;this.isFileImage(b)&&this.change(b,a)})}return a.prototype={_createElements:function(){this.elid.children,this.elinput||(this._createWrapperInput(),this.elinput=this.elid.getElementsByTagName("input")[0]),this._inputStyle(),this._createLabel(),this._createParagraph(),this._createPreview()},_createWrapperInput:function(){var a=document.createElement("div");a.appendChild(this._createInput()),this.elid.appendChild(a)},_createInput:function(){var a=document.createElement("input");return a.setAttribute("type","file"),a.name=this._options.name,a},_inputStyle:function(){for(var b=this._options.acceptType,c=this.elinput,e="",a=0;a<b.length;a++)e+=b[a],a+1!=b.length&&(e+=", ");c.setAttribute("accept",e),c.setAttribute("id",`buttoninputid-${this.elid.id}`),d(c,{opacity:0,width:"0.1px",height:"0.1px",position:"absolute"})},_createLabel:function(){var a=document.createElement("label");a.setAttribute("for",this.elinput.id),a.textContent=this._options.buttonText,a.setAttribute("class","inblabel"),this.elinput.parentElement.appendChild(a),d(a,{display:"block",position:"relative",width:"150px",height:"40px","border-radius":"25px",background:"#9c27b0","box-shadow":"0 4px 7px rgba(0, 0, 0, 0.4)",display:"flex","align-items":"center","justify-content":"center",color:"#fff","font-weight":"bold",cursor:"pointer"})},_createParagraph:function(){var a=document.createElement("p");a.classList.add("inbfilename"),this.elinput.parentElement.appendChild(a),d(a,{"font-size":"0.85rem",color:"#555"})},_createPreview:function(){var a=this.elid.querySelector(".inbpreview");if(!a){var b=document.createElement("div");b.setAttribute("class","inbpreview"),this.elid.appendChild(b),a=b}a.style.marginBottom="15px"},_previewStyle:function(){taginbpreview.style.marginBottom="15px"},isFileImage:function(a){let b=this._options.acceptType;return a&&b.includes(a.type)},change:function(a,i){var c,j=this.elid.querySelector(".inbpreview"),b=new FileReader;if(b.onload=(c=this._options,function(a){j.innerHTML="<img>";var b=j.querySelector("img");b.src=a.target.result,d(b,c.previewStyles),c.onChange.call(this,i,a.target.result)}),this._options.showPreview&&b.readAsDataURL(a),this._options.showInfo){let{name:e,size:f}=a,g=(f/1e3).toFixed(2),h=`${e} - ${g}KB`;this.elStatus.textContent=h}}},a}()